module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},38847,a=>{"use strict";let b=process.env.NEXT_PUBLIC_API_URL??"http://localhost:3000";a.s(["BASE_URL",0,b])},44750,a=>{"use strict";var b=a.i(72131),c=a.i(50944);a.i(47033),a.s(["useRequireAuth",0,a=>{let d=(0,c.useRouter)(),[e,f]=(0,b.useState)(null);return(0,b.useEffect)(()=>{},[a?.allowedRoles,d]),e}])},35377,a=>{"use strict";var b=a.i(72131),c=a.i(50944),d=a.i(47033),e=a.i(38847),f=a.i(44750);let g=(0,b.memo)(({user:a})=>(0,b.createElement)("tr",null,(0,b.createElement)("td",null,a.id),(0,b.createElement)("td",null,a.username),(0,b.createElement)("td",null,a.fullName??"-"),(0,b.createElement)("td",null,a.email??"-"),(0,b.createElement)("td",null,(0,b.createElement)("span",{className:`admin-badge ${a.role}`},a.role))));g.displayName="UserRow",a.s(["default",0,()=>{let a=(0,c.useRouter)(),h=(0,f.useRequireAuth)({allowedRoles:[d.USER_ROLES.ADMIN]}),[i,j]=(0,b.useState)([]),[k,l]=(0,b.useState)(null),[m,n]=(0,b.useState)(!1),[o,p]=(0,b.useState)(!1),[q,r]=(0,b.useState)(null),[s,t]=(0,b.useState)(()=>new Date),u=(0,b.useRef)(new Date().toDateString()),[v,w]=(0,b.useState)(!1);(0,b.useEffect)(()=>{let a=window.setInterval(()=>{let a=new Date;a.toDateString()!==u.current&&(u.current=a.toDateString(),t(a))},6e4);return()=>window.clearInterval(a)},[]);let x=(0,b.useCallback)(a=>a.toLocaleDateString("vi-VN",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),[]),y=(0,b.useMemo)(()=>x(s),[s,x]),z=(0,b.useCallback)(async()=>{n(!0),r(null);try{let a=await fetch(`${e.BASE_URL}/api/users/users`,{headers:{...d.authUtils.getAuthHeader(),"Content-Type":"application/json"}});if(!a.ok)throw Error("KhÃ´ng thá»ƒ táº£i danh sÃ¡ch ngÆ°á»i dÃ¹ng");let b=await a.json(),c=Array.isArray(b)?b:[];j(c),c.length>0&&!v&&w(!0)}catch(a){console.error(a),r("KhÃ´ng thá»ƒ táº£i danh sÃ¡ch ngÆ°á»i dÃ¹ng")}finally{n(!1)}},[v]),A=(0,b.useCallback)(async()=>{p(!0);try{let a=new Date,b=new Date;b.setDate(b.getDate()-30);let c=await fetch(`${e.BASE_URL}/api/attendance/statistics?startDate=${b.toISOString().split("T")[0]}&endDate=${a.toISOString().split("T")[0]}`,{headers:{...d.authUtils.getAuthHeader(),"Content-Type":"application/json"}});if(!c.ok)return void l(null);let f=await c.json();l(f.data??null)}catch(a){console.error("Error fetching statistics:",a)}finally{p(!1)}},[]);(0,b.useEffect)(()=>{v&&A()},[A,v]),(0,b.useEffect)(()=>{if(h){if(h.role!==d.USER_ROLES.ADMIN)return void a.replace("/dashboard/user");z()}},[h,a,z]);let B=(0,b.useMemo)(()=>i.filter(a=>"admin"===a.role).length,[i]),C=(0,b.useMemo)(()=>i.filter(a=>"user"===a.role).length,[i]),D=(0,b.useCallback)(()=>{d.authUtils.clearAuth(),a.replace("/login")},[a]),E=(0,b.useMemo)(()=>{if(!k)return[];let a=a=>null==a?"0h":`${Number(a).toFixed(1)}h`;return[{label:"Tá»•ng báº£n ghi",value:k.totalRecords??0,icon:"ðŸ“Š"},{label:"Tá»•ng giá» lÃ m viá»‡c",value:a(k.totalHours),icon:"â±ï¸"},{label:"Trung bÃ¬nh giá»/ngÃ y",value:a(k.averageHours),icon:"ðŸ“ˆ"},{label:"ÄÃ£ cháº¥m cÃ´ng ra",value:k.checkedOutCount??0,icon:"âœ…"}]},[k]),F=(0,b.useMemo)(()=>[{label:"Tá»•ng ngÆ°á»i dÃ¹ng",value:i.length,icon:"ðŸ‘¥"},{label:"Quáº£n trá»‹ viÃªn",value:B,icon:"ðŸ‘‘"},{label:"NhÃ¢n viÃªn",value:C,icon:"ðŸ’¼"}],[i.length,B,C]);return(0,b.createElement)("div",{className:"admin-dashboard"},(0,b.createElement)("div",{className:"admin-shell"},(0,b.createElement)("header",{className:"admin-header"},(0,b.createElement)("div",{className:"admin-header-left"},(0,b.createElement)("h1",null,"Báº£ng Äiá»u Khiá»ƒn Admin"),(0,b.createElement)("p",{className:"subtitle"},"Quáº£n lÃ½ há»‡ thá»‘ng cháº¥m cÃ´ng"),h?(0,b.createElement)("p",{className:"greeting"},"Xin chÃ o, ",h.fullName??h.username):null),(0,b.createElement)("div",{className:"admin-header-right"},(0,b.createElement)("span",{className:"admin-date-chip"},y),(0,b.createElement)("button",{className:"admin-btn",onClick:D},"ÄÄƒng xuáº¥t"))),q?(0,b.createElement)("div",{className:"admin-alert error"},q):null,(0,b.createElement)("section",{className:"admin-panel"},(0,b.createElement)("div",{className:"admin-panel-header"},(0,b.createElement)("div",null,(0,b.createElement)("h2",{className:"admin-panel-title"},"Tá»•ng quan tá»• chá»©c"),(0,b.createElement)("p",{className:"admin-panel-subtitle"},"Thá»‘ng kÃª nhÃ¢n sá»±")),(0,b.createElement)("button",{className:"admin-btn secondary",onClick:z,disabled:m},m?(0,b.createElement)(b.Fragment,null,(0,b.createElement)("span",{className:"admin-loading",style:{marginRight:"8px"}}),"Äang táº£i..."):"ðŸ”„ LÃ m má»›i")),(0,b.createElement)("div",{className:"admin-stats-grid"},F.map(a=>(0,b.createElement)("div",{key:a.label,className:"admin-stat-card"},(0,b.createElement)("p",{className:"admin-stat-label"},`${a.icon} ${a.label}`),(0,b.createElement)("p",{className:"admin-stat-value"},a.value))))),(0,b.createElement)("section",{className:"admin-panel"},(0,b.createElement)("div",{className:"admin-panel-header"},(0,b.createElement)("div",null,(0,b.createElement)("h2",{className:"admin-panel-title"},"Thá»‘ng kÃª cháº¥m cÃ´ng"),(0,b.createElement)("p",{className:"admin-panel-subtitle"},"30 ngÃ y gáº§n nháº¥t")),(0,b.createElement)("button",{className:"admin-btn secondary",onClick:A,disabled:o},o?(0,b.createElement)(b.Fragment,null,(0,b.createElement)("span",{className:"admin-loading",style:{marginRight:"8px"}}),"Äang táº£i..."):"ðŸ”„ Cáº­p nháº­t")),o?(0,b.createElement)("p",{className:"admin-placeholder"},"Äang tá»•ng há»£p dá»¯ liá»‡u..."):null,!o&&k&&E.length>0?(0,b.createElement)("div",{className:"admin-stats-grid"},E.map(a=>(0,b.createElement)("div",{key:a.label,className:"admin-stat-card"},(0,b.createElement)("p",{className:"admin-stat-label"},`${a.icon} ${a.label}`),(0,b.createElement)("p",{className:`admin-stat-value ${"string"==typeof a.value?"small":""}`},a.value)))):null,o||k?null:(0,b.createElement)("p",{className:"admin-placeholder"},"ChÆ°a cÃ³ dá»¯ liá»‡u thá»‘ng kÃª cho khoáº£ng thá»i gian nÃ y.")),(0,b.createElement)("section",{className:"admin-panel"},(0,b.createElement)("div",{className:"admin-panel-header"},(0,b.createElement)("div",null,(0,b.createElement)("h2",{className:"admin-panel-title"},"Danh sÃ¡ch ngÆ°á»i dÃ¹ng"),(0,b.createElement)("p",{className:"admin-panel-subtitle"},"Quáº£n lÃ½ tÃ i khoáº£n há»‡ thá»‘ng")),(0,b.createElement)("button",{className:"admin-btn secondary",onClick:z,disabled:m},m?(0,b.createElement)(b.Fragment,null,(0,b.createElement)("span",{className:"admin-loading",style:{marginRight:"8px"}}),"Äang táº£i..."):"ðŸ”„ LÃ m má»›i")),m?(0,b.createElement)("p",{className:"admin-placeholder"},"Äang táº£i danh sÃ¡ch ngÆ°á»i dÃ¹ng..."):(0,b.createElement)("div",{className:"admin-table-wrapper"},(0,b.createElement)("table",{className:"admin-table"},(0,b.createElement)("thead",null,(0,b.createElement)("tr",null,(0,b.createElement)("th",null,"ID"),(0,b.createElement)("th",null,"TÃªn Ä‘Äƒng nháº­p"),(0,b.createElement)("th",null,"Há» tÃªn"),(0,b.createElement)("th",null,"Email"),(0,b.createElement)("th",null,"Vai trÃ²"))),(0,b.createElement)("tbody",null,0===i.length?(0,b.createElement)("tr",null,(0,b.createElement)("td",{colSpan:5},(0,b.createElement)("div",{className:"admin-placeholder"},"ChÆ°a cÃ³ ngÆ°á»i dÃ¹ng nÃ o"))):i.map(a=>(0,b.createElement)(g,{key:a.id,user:a}))))))))},"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b643fe6c._.js.map