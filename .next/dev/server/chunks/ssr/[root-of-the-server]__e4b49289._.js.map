{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Dev/Du%CC%9B%CC%A3%20a%CC%81n%20u%CC%9B%CC%81ng%20du%CC%A3ng%20cha%CC%82%CC%81m%20co%CC%82ng/frontend/lib/auth.ts"],"sourcesContent":["'use client'\n\nexport const USER_ROLES = {\n  ADMIN: 'admin',\n  MANAGER: 'manager',\n  USER: 'user'\n} as const\n\nexport type UserRole = (typeof USER_ROLES)[keyof typeof USER_ROLES]\n\nexport interface User {\n  id: number\n  username: string\n  email?: string\n  fullName?: string\n  role?: UserRole\n}\n\nexport interface AuthResponse {\n  success: boolean\n  token?: string\n  user?: User\n  message?: string\n}\n\nconst TOKEN_KEY = 'auth_token'\nconst USER_KEY = 'auth_user'\n\nexport const authUtils = {\n  setAuth: (token: string, user: User): void => {\n    localStorage.setItem(TOKEN_KEY, token)\n    localStorage.setItem(USER_KEY, JSON.stringify(user))\n  },\n\n  getToken: (): string | null => {\n    return localStorage.getItem(TOKEN_KEY)\n  },\n\n  getUser: (): User | null => {\n    const userStr = localStorage.getItem(USER_KEY)\n    if (!userStr) return null\n    try {\n      return JSON.parse(userStr) as User\n    } catch {\n      return null\n    }\n  },\n\n  isAuthenticated: (): boolean => {\n    return !!authUtils.getToken()\n  },\n\n  clearAuth: (): void => {\n    localStorage.removeItem(TOKEN_KEY)\n    localStorage.removeItem(USER_KEY)\n  },\n\n  getAuthHeader: (): { Authorization: string } | Record<string, never> => {\n    const token = authUtils.getToken()\n    return token ? { Authorization: `Bearer ${token}` } : {}\n  }\n}\n\n\n"],"names":[],"mappings":";;;;;;AAAA;AAEO,MAAM,aAAa;IACxB,OAAO;IACP,SAAS;IACT,MAAM;AACR;AAmBA,MAAM,YAAY;AAClB,MAAM,WAAW;AAEV,MAAM,YAAY;IACvB,SAAS,CAAC,OAAe;QACvB,aAAa,OAAO,CAAC,WAAW;QAChC,aAAa,OAAO,CAAC,UAAU,KAAK,SAAS,CAAC;IAChD;IAEA,UAAU;QACR,OAAO,aAAa,OAAO,CAAC;IAC9B;IAEA,SAAS;QACP,MAAM,UAAU,aAAa,OAAO,CAAC;QACrC,IAAI,CAAC,SAAS,OAAO;QACrB,IAAI;YACF,OAAO,KAAK,KAAK,CAAC;QACpB,EAAE,OAAM;YACN,OAAO;QACT;IACF;IAEA,iBAAiB;QACf,OAAO,CAAC,CAAC,UAAU,QAAQ;IAC7B;IAEA,WAAW;QACT,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IAC1B;IAEA,eAAe;QACb,MAAM,QAAQ,UAAU,QAAQ;QAChC,OAAO,QAAQ;YAAE,eAAe,CAAC,OAAO,EAAE,OAAO;QAAC,IAAI,CAAC;IACzD;AACF"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Dev/Du%CC%9B%CC%A3%20a%CC%81n%20u%CC%9B%CC%81ng%20du%CC%A3ng%20cha%CC%82%CC%81m%20co%CC%82ng/frontend/hooks/useAuthRedirect.ts"],"sourcesContent":["'use client'\n\nimport { useEffect, useMemo } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { USER_ROLES, authUtils } from '@/lib/auth'\n\nconst useAuthRedirect = (redirectTo?: string): void => {\n  const router = useRouter()\n\n  // Normalize redirectTo to always be a string (empty string if undefined)\n  const redirectToKey = useMemo(() => redirectTo ?? '', [redirectTo])\n\n  useEffect(() => {\n    if (!authUtils.isAuthenticated()) return\n\n    if (redirectToKey) {\n      router.replace(redirectToKey)\n      return\n    }\n\n    const user = authUtils.getUser()\n    if (user?.role === USER_ROLES.ADMIN) {\n      router.replace('/dashboard/admin')\n    } else {\n      router.replace('/dashboard/user')\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [redirectToKey])\n}\n\nexport default useAuthRedirect\n\n\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAMA,MAAM,kBAAkB,CAAC;IACvB,MAAM,SAAS,IAAA,+IAAS;IAExB,yEAAyE;IACzE,MAAM,gBAAgB,IAAA,gNAAO,EAAC,IAAM,cAAc,IAAI;QAAC;KAAW;IAElE,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,wHAAS,CAAC,eAAe,IAAI;QAElC,IAAI,eAAe;YACjB,OAAO,OAAO,CAAC;YACf;QACF;QAEA,MAAM,OAAO,wHAAS,CAAC,OAAO;QAC9B,IAAI,MAAM,SAAS,yHAAU,CAAC,KAAK,EAAE;YACnC,OAAO,OAAO,CAAC;QACjB,OAAO;YACL,OAAO,OAAO,CAAC;QACjB;IACA,uDAAuD;IACzD,GAAG;QAAC;KAAc;AACpB;uCAEe"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Dev/Du%CC%9B%CC%A3%20a%CC%81n%20u%CC%9B%CC%81ng%20du%CC%A3ng%20cha%CC%82%CC%81m%20co%CC%82ng/frontend/lib/config.ts"],"sourcesContent":["export const BASE_URL = process.env.NEXT_PUBLIC_API_URL\nconsole.log('BASE_URL:', BASE_URL)\nif (!BASE_URL) {\n    throw new Error('BASE_URL is not defined')\n}"],"names":[],"mappings":";;;;AAAO,MAAM;AACb,QAAQ,GAAG,CAAC,aAAa;AACzB"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Dev/Du%CC%9B%CC%A3%20a%CC%81n%20u%CC%9B%CC%81ng%20du%CC%A3ng%20cha%CC%82%CC%81m%20co%CC%82ng/frontend/app/%28auth%29/login/page.ts"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport { useRouter } from 'next/navigation'\nimport { createElement, Fragment, useState, type ReactElement } from 'react'\nimport useAuthRedirect from '@/hooks/useAuthRedirect'\nimport { authUtils, type AuthResponse } from '@/lib/auth'\nimport { BASE_URL } from '@/lib/config'\n\nconst LoginPage = (): ReactElement => {\n    const router = useRouter()\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [rememberMe, setRememberMe] = useState(false)\n    const [showPassword, setShowPassword] = useState(false)\n    const [isLoading, setIsLoading] = useState(false)\n    const [errorMessage, setErrorMessage] = useState<string | null>(null)\n\n    useAuthRedirect()\n\n    const handleSubmit = async (event: React.FormEvent<HTMLFormElement>): Promise<void> => {\n        event.preventDefault()\n        setErrorMessage(null)\n        setIsLoading(true)\n\n        try {\n            const response = await fetch(`${BASE_URL}/api/users/login`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ username, password })\n            })\n\n            const data: AuthResponse = await response.json()\n            if (response.ok && data.success && data.token && data.user) {\n                authUtils.setAuth(data.token, data.user)\n                if (data.user.role === 'admin') {\n                    router.replace('/dashboard/admin')\n                } else {\n                    router.replace('/dashboard/user')\n                }\n                return\n            }\n\n            setErrorMessage(data.message ?? 'Đăng nhập thất bại. Vui lòng thử lại.')\n        } catch (error) {\n            console.error('Login error:', error)\n            setErrorMessage('Đã xảy ra lỗi khi kết nối đến server. Vui lòng thử lại.')\n        } finally {\n            setIsLoading(false)\n        }\n    }\n\n    return createElement(\n        'div',\n        { className: 'login-container' },\n        createElement(\n            'div',\n            { className: 'login-left' },\n            createElement(\n                'div',\n                { className: 'login-content' },\n                createElement('h1', null, 'Đăng nhập'),\n                createElement('p', { className: 'subtitle' }, 'Hệ thống chấm công'),\n                errorMessage\n                    ? createElement(\n                        'div',\n                        {\n                            className: 'error-message',\n                            style: {\n                                padding: '12px',\n                                marginBottom: '24px',\n                                backgroundColor: '#fee',\n                                color: '#c33',\n                                borderRadius: '4px',\n                                fontSize: '14px',\n                                border: '1px solid #fcc'\n                            }\n                        },\n                        errorMessage\n                    )\n                    : null,\n                createElement(\n                    'form',\n                    { onSubmit: handleSubmit, className: 'login-form' },\n                    createElement(\n                        'div',\n                        { className: 'form-group' },\n                        createElement('label', { htmlFor: 'username' }, 'Tên đăng nhập'),\n                        createElement('input', {\n                            id: 'username',\n                            name: 'username',\n                            type: 'text',\n                            value: username,\n                            onChange: (event: React.ChangeEvent<HTMLInputElement>) => setUsername(event.target.value),\n                            required: true\n                        })\n                    ),\n                    createElement(\n                        'div',\n                        { className: 'form-group' },\n                        createElement('label', { htmlFor: 'password' }, 'Mật khẩu'),\n                        createElement(\n                            'div',\n                            { className: 'password-input-wrapper' },\n                            createElement('input', {\n                                id: 'password',\n                                name: 'password',\n                                type: showPassword ? 'text' : 'password',\n                                value: password,\n                                onChange: (event: React.ChangeEvent<HTMLInputElement>) => setPassword(event.target.value),\n                                required: true\n                            }),\n                            createElement(\n                                'button',\n                                {\n                                    type: 'button',\n                                    'aria-label': 'Toggle password visibility',\n                                    className: 'password-toggle',\n                                    onClick: () => setShowPassword((prev) => !prev)\n                                },\n                                showPassword\n                                    ? createElement(\n                                        Fragment,\n                                        null,\n                                        createElement('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 }, createElement('path', { d: 'M1 12S5 4 12 4 23 12 23 12 19 20 12 20 1 12 1 12Z' }), createElement('circle', { cx: 12, cy: 12, r: 3 }), createElement('line', { x1: 1, y1: 1, x2: 23, y2: 23 }))\n                                    )\n                                    : createElement('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 }, createElement('path', { d: 'M1 12S5 4 12 4 23 12 23 12 19 20 12 20 1 12 1 12Z' }), createElement('circle', { cx: 12, cy: 12, r: 3 }))\n                            )\n                        )\n                    ),\n                    createElement(\n                        'div',\n                        { className: 'form-options' },\n                        createElement(\n                            'label',\n                            { className: 'checkbox-label' },\n                            createElement('input', {\n                                type: 'checkbox',\n                                checked: rememberMe,\n                                onChange: (event: React.ChangeEvent<HTMLInputElement>) => setRememberMe(event.target.checked)\n                            }),\n                            createElement('span', null, 'Ghi nhớ đăng nhập')\n                        ),\n                        createElement('a', { className: 'forgot-password', href: '#' }, 'Quên mật khẩu?')\n                    ),\n                    createElement(\n                        'div',\n                        {\n                            className: 'login-footer',\n                            style: { marginTop: '16px', textAlign: 'center', fontSize: '14px', color: '#666' }\n                        },\n                        'Chưa có tài khoản? ',\n                        createElement(Link, { href: '/register', style: { color: '#000', fontWeight: 500 } }, 'Đăng ký ngay')\n                    ),\n                    createElement(\n                        'button',\n                        { type: 'submit', className: 'login-button', disabled: isLoading },\n                        isLoading\n                            ? createElement(\n                                Fragment,\n                                null,\n                                createElement(\n                                    'svg',\n                                    { className: 'spinner', viewBox: '0 0 24 24' },\n                                    createElement(\n                                        'circle',\n                                        {\n                                            cx: 12,\n                                            cy: 12,\n                                            r: 10,\n                                            stroke: 'currentColor',\n                                            strokeWidth: '2',\n                                            fill: 'none',\n                                            strokeDasharray: '32',\n                                            strokeDashoffset: '32'\n                                        },\n                                        createElement('animate', { attributeName: 'stroke-dasharray', dur: '1.5s', values: '0 32;16 16;0 32;0 32', repeatCount: 'indefinite' }),\n                                        createElement('animate', { attributeName: 'stroke-dashoffset', dur: '1.5s', values: '0;-16;-32;-32', repeatCount: 'indefinite' })\n                                    )\n                                ),\n                                'Đang đăng nhập...'\n                            )\n                            : 'Đăng nhập'\n                    )\n                )\n            )\n        ),\n        createElement(\n            'div',\n            { className: 'login-right' },\n            createElement(\n                'div',\n                { className: 'brand-section' },\n                createElement(\n                    'div',\n                    { className: 'brand-logo' },\n                    createElement('img', { src: '/brand-logo.svg', alt: 'Brand Logo', width: 72, height: 72 })\n                ),\n                createElement('h2', null, 'Bình Boong'),\n                createElement('p', null, 'Hệ thống quản lý chấm công của Bình Boong')\n            )\n        )\n    )\n}\n\nexport default LoginPage\n\n"],"names":[],"mappings":"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"}}]
}