(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},38036,e=>{"use strict";let t="auth_token",a="auth_user",l={setAuth:(e,l)=>{localStorage.setItem(t,e),localStorage.setItem(a,JSON.stringify(l))},getToken:()=>localStorage.getItem(t),getUser:()=>{let e=localStorage.getItem(a);if(!e)return null;try{return JSON.parse(e)}catch{return null}},isAuthenticated:()=>!!l.getToken(),clearAuth:()=>{localStorage.removeItem(t),localStorage.removeItem(a)},getAuthHeader:()=>{let e=l.getToken();return e?{Authorization:`Bearer ${e}`}:{}}};e.s(["USER_ROLES",0,{ADMIN:"admin",MANAGER:"manager",USER:"user"},"authUtils",0,l])},61664,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_URL??"http://localhost:3000";e.s(["BASE_URL",0,t])},93526,e=>{"use strict";var t=e.i(71645),a=e.i(18566),l=e.i(38036);e.s(["useRequireAuth",0,e=>{let n=(0,a.useRouter)(),[r,s]=(0,t.useState)(null);return(0,t.useEffect)(()=>{let t=l.authUtils.getUser();(s(t),l.authUtils.isAuthenticated())?e?.allowedRoles&&t?.role&&(e.allowedRoles.includes(t.role)||(t.role===l.USER_ROLES.ADMIN?n.replace("/dashboard/admin"):n.replace("/dashboard/user"))):n.replace("/login")},[e?.allowedRoles,n]),r}])},13991,e=>{"use strict";var t=e.i(71645),a=e.i(18566),l=e.i(38036),n=e.i(61664),r=e.i(93526);let s=(0,t.memo)(({user:e})=>(0,t.createElement)("tr",null,(0,t.createElement)("td",null,e.id),(0,t.createElement)("td",null,e.username),(0,t.createElement)("td",null,e.fullName??"-"),(0,t.createElement)("td",null,e.email??"-"),(0,t.createElement)("td",null,(0,t.createElement)("span",{className:`admin-badge ${e.role}`},e.role))));s.displayName="UserRow",e.s(["default",0,()=>{let e=(0,a.useRouter)(),i=(0,r.useRequireAuth)({allowedRoles:[l.USER_ROLES.ADMIN]}),[c,m]=(0,t.useState)([]),[u,d]=(0,t.useState)(null),[o,h]=(0,t.useState)(!1),[g,E]=(0,t.useState)(!1),[p,N]=(0,t.useState)(null),[b,v]=(0,t.useState)(()=>new Date),S=(0,t.useRef)(new Date().toDateString()),[y,f]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=window.setInterval(()=>{let e=new Date;e.toDateString()!==S.current&&(S.current=e.toDateString(),v(e))},6e4);return()=>window.clearInterval(e)},[]);let R=(0,t.useCallback)(e=>e.toLocaleDateString("vi-VN",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),[]),A=(0,t.useMemo)(()=>R(b),[b,R]),k=(0,t.useCallback)(async()=>{h(!0),N(null);try{let e=await fetch(`${n.BASE_URL}/api/users/users`,{headers:{...l.authUtils.getAuthHeader(),"Content-Type":"application/json"}});if(!e.ok)throw Error("KhÃ´ng thá»ƒ táº£i danh sÃ¡ch ngÆ°á»i dÃ¹ng");let t=await e.json(),a=Array.isArray(t)?t:[];m(a),a.length>0&&!y&&f(!0)}catch(e){console.error(e),N("KhÃ´ng thá»ƒ táº£i danh sÃ¡ch ngÆ°á»i dÃ¹ng")}finally{h(!1)}},[y]),w=(0,t.useCallback)(async()=>{E(!0);try{let e=new Date,t=new Date;t.setDate(t.getDate()-30);let a=await fetch(`${n.BASE_URL}/api/attendance/statistics?startDate=${t.toISOString().split("T")[0]}&endDate=${e.toISOString().split("T")[0]}`,{headers:{...l.authUtils.getAuthHeader(),"Content-Type":"application/json"}});if(!a.ok)return void d(null);let r=await a.json();d(r.data??null)}catch(e){console.error("Error fetching statistics:",e)}finally{E(!1)}},[]);(0,t.useEffect)(()=>{y&&w()},[w,y]),(0,t.useEffect)(()=>{if(i){if(i.role!==l.USER_ROLES.ADMIN)return void e.replace("/dashboard/user");k()}},[i,e,k]);let U=(0,t.useMemo)(()=>c.filter(e=>"admin"===e.role).length,[c]),T=(0,t.useMemo)(()=>c.filter(e=>"user"===e.role).length,[c]),D=(0,t.useCallback)(()=>{l.authUtils.clearAuth(),e.replace("/login")},[e]),C=(0,t.useMemo)(()=>{if(!u)return[];let e=e=>null==e?"0h":`${Number(e).toFixed(1)}h`;return[{label:"Tá»•ng báº£n ghi",value:u.totalRecords??0,icon:"ðŸ“Š"},{label:"Tá»•ng giá» lÃ m viá»‡c",value:e(u.totalHours),icon:"â±ï¸"},{label:"Trung bÃ¬nh giá»/ngÃ y",value:e(u.averageHours),icon:"ðŸ“ˆ"},{label:"ÄÃ£ cháº¥m cÃ´ng ra",value:u.checkedOutCount??0,icon:"âœ…"}]},[u]),I=(0,t.useMemo)(()=>[{label:"Tá»•ng ngÆ°á»i dÃ¹ng",value:c.length,icon:"ðŸ‘¥"},{label:"Quáº£n trá»‹ viÃªn",value:U,icon:"ðŸ‘‘"},{label:"NhÃ¢n viÃªn",value:T,icon:"ðŸ’¼"}],[c.length,U,T]);return(0,t.createElement)("div",{className:"admin-dashboard"},(0,t.createElement)("div",{className:"admin-shell"},(0,t.createElement)("header",{className:"admin-header"},(0,t.createElement)("div",{className:"admin-header-left"},(0,t.createElement)("h1",null,"Báº£ng Äiá»u Khiá»ƒn Admin"),(0,t.createElement)("p",{className:"subtitle"},"Quáº£n lÃ½ há»‡ thá»‘ng cháº¥m cÃ´ng"),i?(0,t.createElement)("p",{className:"greeting"},"Xin chÃ o, ",i.fullName??i.username):null),(0,t.createElement)("div",{className:"admin-header-right"},(0,t.createElement)("span",{className:"admin-date-chip"},A),(0,t.createElement)("button",{className:"admin-btn",onClick:D},"ÄÄƒng xuáº¥t"))),p?(0,t.createElement)("div",{className:"admin-alert error"},p):null,(0,t.createElement)("section",{className:"admin-panel"},(0,t.createElement)("div",{className:"admin-panel-header"},(0,t.createElement)("div",null,(0,t.createElement)("h2",{className:"admin-panel-title"},"Tá»•ng quan tá»• chá»©c"),(0,t.createElement)("p",{className:"admin-panel-subtitle"},"Thá»‘ng kÃª nhÃ¢n sá»±")),(0,t.createElement)("button",{className:"admin-btn secondary",onClick:k,disabled:o},o?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("span",{className:"admin-loading",style:{marginRight:"8px"}}),"Äang táº£i..."):"ðŸ”„ LÃ m má»›i")),(0,t.createElement)("div",{className:"admin-stats-grid"},I.map(e=>(0,t.createElement)("div",{key:e.label,className:"admin-stat-card"},(0,t.createElement)("p",{className:"admin-stat-label"},`${e.icon} ${e.label}`),(0,t.createElement)("p",{className:"admin-stat-value"},e.value))))),(0,t.createElement)("section",{className:"admin-panel"},(0,t.createElement)("div",{className:"admin-panel-header"},(0,t.createElement)("div",null,(0,t.createElement)("h2",{className:"admin-panel-title"},"Thá»‘ng kÃª cháº¥m cÃ´ng"),(0,t.createElement)("p",{className:"admin-panel-subtitle"},"30 ngÃ y gáº§n nháº¥t")),(0,t.createElement)("button",{className:"admin-btn secondary",onClick:w,disabled:g},g?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("span",{className:"admin-loading",style:{marginRight:"8px"}}),"Äang táº£i..."):"ðŸ”„ Cáº­p nháº­t")),g?(0,t.createElement)("p",{className:"admin-placeholder"},"Äang tá»•ng há»£p dá»¯ liá»‡u..."):null,!g&&u&&C.length>0?(0,t.createElement)("div",{className:"admin-stats-grid"},C.map(e=>(0,t.createElement)("div",{key:e.label,className:"admin-stat-card"},(0,t.createElement)("p",{className:"admin-stat-label"},`${e.icon} ${e.label}`),(0,t.createElement)("p",{className:`admin-stat-value ${"string"==typeof e.value?"small":""}`},e.value)))):null,g||u?null:(0,t.createElement)("p",{className:"admin-placeholder"},"ChÆ°a cÃ³ dá»¯ liá»‡u thá»‘ng kÃª cho khoáº£ng thá»i gian nÃ y.")),(0,t.createElement)("section",{className:"admin-panel"},(0,t.createElement)("div",{className:"admin-panel-header"},(0,t.createElement)("div",null,(0,t.createElement)("h2",{className:"admin-panel-title"},"Danh sÃ¡ch ngÆ°á»i dÃ¹ng"),(0,t.createElement)("p",{className:"admin-panel-subtitle"},"Quáº£n lÃ½ tÃ i khoáº£n há»‡ thá»‘ng")),(0,t.createElement)("button",{className:"admin-btn secondary",onClick:k,disabled:o},o?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("span",{className:"admin-loading",style:{marginRight:"8px"}}),"Äang táº£i..."):"ðŸ”„ LÃ m má»›i")),o?(0,t.createElement)("p",{className:"admin-placeholder"},"Äang táº£i danh sÃ¡ch ngÆ°á»i dÃ¹ng..."):(0,t.createElement)("div",{className:"admin-table-wrapper"},(0,t.createElement)("table",{className:"admin-table"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,"ID"),(0,t.createElement)("th",null,"TÃªn Ä‘Äƒng nháº­p"),(0,t.createElement)("th",null,"Há» tÃªn"),(0,t.createElement)("th",null,"Email"),(0,t.createElement)("th",null,"Vai trÃ²"))),(0,t.createElement)("tbody",null,0===c.length?(0,t.createElement)("tr",null,(0,t.createElement)("td",{colSpan:5},(0,t.createElement)("div",{className:"admin-placeholder"},"ChÆ°a cÃ³ ngÆ°á»i dÃ¹ng nÃ o"))):c.map(e=>(0,t.createElement)(s,{key:e.id,user:e}))))))))},"dynamic",0,"force-dynamic"])}]);